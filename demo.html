<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Single Mobile: Parallax ‚Üí Left Sticky</title>
<style>
  :root{
    --bg:#0f1113;
    --content-gap:42vw; /* space reserved on left for the fixed mobile */
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:var(--bg);
    color:#fff;
    -webkit-font-smoothing:antialiased;
  }

  /* PARALLAX REGION (will be pinned while scrolling) */
  .parallax {
    height:100vh;              /* viewport tall */
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .parallax .hint {
    position: absolute;
    top:18px;
    left:18px;
    font-size:14px;
    color:#9aa1a6;
    opacity:.9;
  }

  /* fixed overlay for device mockups (one copy of each device) */
  .devices-fixed{
    position:fixed;
    inset:0;                  /* cover viewport */
    display:flex;
    align-items:center;
    justify-content:center;
    pointer-events:none;      /* so underlying content can be clicked */
    z-index:40;
  }

  .device{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    will-change: transform, opacity, left;
    opacity:0;
  }

  /* sizes use vw so they scale nicely on desktop */
  .device.laptop  { width: min(1200px, 70vw);  max-width:1440px;  }
  .device.tablet  { width: min(820px, 42vw);   max-width:800px;   }
  .device.mobile  { width: clamp(220px, 22vw, 400px); max-width:400px; }

  /* FEATURES / CONTENT section that scrolls to the right of the fixed mobile */
  .features-section{
    min-height:200vh;
    display:block;
    padding: 60px 40px;
    /* Reserve left space so content doesn't sit under the fixed mobile */
    padding-left: calc(var(--content-gap) + 2rem);
    position:relative;
    z-index:1;
  }

  .feature {
    min-height:80vh;
    border-bottom:1px solid rgba(255,255,255,0.05);
    display:flex;
    align-items:center;
    font-size: clamp(20px, 2.2vw, 28px);
    gap:12px;
    padding:2rem 0;
  }

  /* small responsive tweaks */
  @media (max-width:900px){
    :root{ --content-gap:58vw; } /* mobile needs more left room */
    .device.laptop{ display:none; }
    .device.tablet{ width:60vw; }
  }
</style>
</head>
<body>

  <!-- Parallax section (pinned while timeline runs) -->
  <section class="parallax">
    <div class="hint">Scroll to animate ‚Äî Laptop ‚Üí Tablet ‚Üí Mobile ‚Üí Mobile moves left & sticks</div>
  </section>

  <!-- FIXED overlay with the three device mockups (ONE mobile image only here) -->
  <div class="devices-fixed">
    <!-- laptop -->
    <img class="device laptop" src="https://via.placeholder.com/1440x900/222/eee?text=Laptop+Mockup" alt="Laptop mockup">
    <!-- tablet -->
    <img class="device tablet" src="https://via.placeholder.com/800x1200/2b2b2b/fff?text=Tablet+Mockup" alt="Tablet mockup">
    <!-- mobile (single element - will remain the same element later when it moves left) -->
    <img class="device mobile" src="https://via.placeholder.com/400x800/111/fff?text=Mobile+Mockup" alt="Mobile mockup">
  </div>

  <!-- Features content that scrolls on the right of the fixed mobile -->
  <section class="features-section">
    <div class="feature">üì± Feature 1 ‚Äî Hero text about your app and key metric.</div>
    <div class="feature">‚ö° Feature 2 ‚Äî Fast interactions and instant updates.</div>
    <div class="feature">üîí Feature 3 ‚Äî Secure payments and encrypted data.</div>
    <div class="feature">üåê Feature 4 ‚Äî Cross-device sync and offline mode.</div>
    <div class="feature">üìä Feature 5 ‚Äî Analytics and customizable dashboards.</div>
  </section>

  <!-- GSAP + ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<script>
gsap.registerPlugin(ScrollTrigger);

// set initial states
gsap.set(".laptop", {opacity:1, scale:1});
gsap.set(".tablet", {opacity:0, scale:0.9});
gsap.set(".mobile", {opacity:0, scale:0.85, x:0 });

// Timeline that runs while the PARALLAX section is pinned
const tl = gsap.timeline({
  scrollTrigger: {
    trigger: ".parallax",
    start: "top top",
    end: "+=2200",        // scroll distance for the animation
    scrub: true,
    pin: true,            // pin only during this timeline
    anticipatePin: 1,
    // Once timeline ends, the scroll continues normally
    onLeave: () => {
      // make mobile stick visually on left after animation
      gsap.set(".mobile", {position:"fixed", top:"50%", left:"10%", transform:"translateY(-50%)"});
    }
  }
});

// Laptop fades out
tl.to(".laptop", {opacity:0, scale:0.6, ease:"power1.out", duration:1});

// Tablet fades in
tl.to(".tablet", {opacity:1, scale:1, ease:"power2.out", duration:1}, "-=0.6");

// Hold tablet briefly
tl.addLabel("tabletHold", "+=0.2");

// Swap tablet with mobile
tl.to(".tablet", {opacity:0, duration:0.15});
tl.to(".mobile", {opacity:1, scale:1, duration:0.7}, "-=0.05");

// Move mobile to left (before scroll continues)
tl.to(".mobile", { x: "-33vw", scale:0.95, ease:"power1.inOut", duration:1.1 });

// Refresh ScrollTrigger on resize
window.addEventListener("resize", () => ScrollTrigger.refresh());
</script>

</body>
</html>
